<!doctype html>
<html>
<head>
    <meta charset="utf-8"/>
    <title>Formalize的demo</title>
    <script src="http://g.tbcdn.cn/kissy/k/1.4.1/seed.js" charset="utf-8"></script>
    <link rel="stylesheet" href="http://g.tbcdn.cn/kissy/k/1.3.0/css/dpl/base-min.css">
</head>
<body>
<h2>Formalize的demo</h2>


<form action="data.json">

    <input type="text" name="text1" disabled="disabled" />
</form>


<script>
    var S = KISSY;
    if (S.Config.debug) {
        var srcPath = "../../";
        S.config({
            packages:[
                {
                    name:"gallery/formalize",
                    path:srcPath,
                    charset:"utf-8",
                    ignorePackageNameInUri:true
                }
            ]
        });
    }

    S.use('gallery/formalize/0.1/index', function (S, Formalize) {
        var fake = new Formalize();

        fake.attach(document.forms[0]);

//        var Field = Formalize._FIELDS["text"];
//
//        fake.addField('text1', new Field(document.forms[0].elements['text1']))

        var field = fake.getField('text1');
        field.setValue('test');

        console.log(field.getValue());

        var field = fake.getField('text1');
        field.setValue('test2');

        console.log(field.getValue());

        fake.setValue('text1', 'test3')

        console.log(field.getValue());

        fake.fieldEnable("text1");

        fake.submit({
            async: true,
            url: "data.json",
            data: {
                t1: 1,
                t2: 2
            },
            success: function(data) {
                console.log(data)
            }
        });

        fake.fieldDisable('text1');
    })
</script>
</body>
</html>
